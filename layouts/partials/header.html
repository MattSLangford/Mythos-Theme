<header class="site-header" role="banner">
    <div class="header-container">
        <div class="site-branding">
            <div class="site-info">
                <h1 class="site-title">
                    <a href="/" rel="home">
                        {{ if not .Site.Params.show_profile_photo }}
                            {{ if .Site.Params.custom_avatar }}
                            <img src="{{ .Site.Params.custom_avatar }}" alt="{{ .Site.Title }} logo" class="title-avatar">
                            {{ else if .Site.Author.avatar }}
                            <img src="{{ .Site.Author.avatar }}" alt="{{ .Site.Title }} logo" class="title-avatar">
                            {{ end }}
                        {{ end }}
                        {{ .Site.Title }}
                    </a>
                </h1>
            </div>
        </div>
        
        <nav class="site-navigation" role="navigation" aria-label="Main navigation">
            <!-- CSS-only mobile menu toggle using checkbox -->
            <input type="checkbox" id="mobile-menu-toggle" class="menu-toggle-input" aria-hidden="true">
            <label for="mobile-menu-toggle" class="menu-toggle" aria-label="Open main navigation menu">
                <span class="menu-toggle-text">{{ T "Menu" }}</span>
                <span class="hamburger">
                    <span></span>
                    <span></span>
                    <span></span>
                </span>
            </label>
            
            <!-- JavaScript fallback button (hidden by default) -->
            <button class="menu-toggle js-menu-toggle" aria-controls="primary-menu" aria-expanded="false" aria-label="Open main navigation menu" type="button" style="display: none;">
                <span class="menu-toggle-text">{{ T "Menu" }}</span>
                <span class="hamburger">
                    <span></span>
                    <span></span>
                    <span></span>
                </span>
            </button>
            
            <div class="menu-backdrop" id="menu-backdrop"></div>
            <div class="primary-menu" id="primary-menu">
                <div class="menu-content">
                    <ul class="nav-menu">
                        {{ range .Site.Menus.main }}
                        <li class="nav-item">
                            <a href="{{ .URL }}" class="nav-link"{{ if .Pre }} {{ .Pre | safeHTMLAttr }}{{ end }}>
                                {{ .Name }}
                            </a>
                        </li>
                        {{ end }}
                    </ul>
                    
                    {{ $socialLinks := slice }}
                    {{ if .Site.Params.social_microblog }}{{ $socialLinks = $socialLinks | append (dict "url" .Site.Params.social_microblog "icon" "fab fa-microblog" "label" "Micro.blog") }}{{ end }}
                    {{ if .Site.Params.social_mastodon }}{{ $socialLinks = $socialLinks | append (dict "url" .Site.Params.social_mastodon "icon" "fab fa-mastodon" "label" "Mastodon") }}{{ end }}
                    {{ if .Site.Params.social_x }}{{ $socialLinks = $socialLinks | append (dict "url" .Site.Params.social_x "icon" "fab fa-x-twitter" "label" "X") }}{{ end }}
                    {{ if .Site.Params.social_instagram }}{{ $socialLinks = $socialLinks | append (dict "url" .Site.Params.social_instagram "icon" "fab fa-instagram" "label" "Instagram") }}{{ end }}
                    {{ if .Site.Params.social_tiktok }}{{ $socialLinks = $socialLinks | append (dict "url" .Site.Params.social_tiktok "icon" "fab fa-tiktok" "label" "TikTok") }}{{ end }}
                    {{ if .Site.Params.social_bluesky }}{{ $socialLinks = $socialLinks | append (dict "url" .Site.Params.social_bluesky "icon" "fab fa-bluesky" "label" "Bluesky") }}{{ end }}
                    {{ if .Site.Params.social_pinterest }}{{ $socialLinks = $socialLinks | append (dict "url" .Site.Params.social_pinterest "icon" "fab fa-pinterest" "label" "Pinterest") }}{{ end }}
                    {{ if .Site.Params.social_github }}{{ $socialLinks = $socialLinks | append (dict "url" .Site.Params.social_github "icon" "fab fa-github" "label" "GitHub") }}{{ end }}
                    {{ if .Site.Params.social_reddit }}{{ $socialLinks = $socialLinks | append (dict "url" .Site.Params.social_reddit "icon" "fab fa-reddit" "label" "Reddit") }}{{ end }}
                    {{ if .Site.Params.social_discord }}{{ $socialLinks = $socialLinks | append (dict "url" .Site.Params.social_discord "icon" "fab fa-discord" "label" "Discord") }}{{ end }}
                    {{ if .Site.Params.social_amazon }}{{ $socialLinks = $socialLinks | append (dict "url" .Site.Params.social_amazon "icon" "fab fa-amazon" "label" "Amazon") }}{{ end }}
                    {{ if .Site.Params.social_buymeacoffee }}{{ $socialLinks = $socialLinks | append (dict "url" .Site.Params.social_buymeacoffee "icon" "fas fa-coffee" "label" "Buy Me a Coffee") }}{{ end }}
                    {{ if .Site.Params.social_kofi }}{{ $socialLinks = $socialLinks | append (dict "url" .Site.Params.social_kofi "icon" "fas fa-mug-hot" "label" "Ko-fi") }}{{ end }}
                    {{ if .Site.Params.social_paypal }}{{ $socialLinks = $socialLinks | append (dict "url" .Site.Params.social_paypal "icon" "fab fa-paypal" "label" "PayPal") }}{{ end }}
                    {{ if .Site.Params.social_donate }}{{ $socialLinks = $socialLinks | append (dict "url" .Site.Params.social_donate "icon" "fas fa-heart" "label" "Support") }}{{ end }}
                    {{ if .Site.Params.social_contact }}{{ $socialLinks = $socialLinks | append (dict "url" .Site.Params.social_contact "icon" "fas fa-envelope" "label" "Contact") }}{{ end }}
                    
                    {{ if gt (len $socialLinks) 0 }}
                    <div class="social-icons">
                        {{ range $socialLinks }}
                        <a href="{{ .url }}" class="social-link" aria-label="{{ .label }}" target="_blank" rel="noopener noreferrer">
                            <i class="{{ .icon }}" aria-hidden="true"></i>
                        </a>
                        {{ end }}
                    </div>
                    {{ end }}
                </div>
            </div>
        </nav>
    </div>
</header>